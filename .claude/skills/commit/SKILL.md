---
name: commit
description: 提交当前未 commit 的修改。自动分析变更内容，生成规范的 commit message，支持按目录分组提交或一次性提交所有修改。
---

# Git Commit 技能

提交当前未 commit 的修改到 git 仓库。

## 工作流程

### 步骤一：查看未提交修改

git status --short

分析变更类型：
- M - 已修改
- ?? - 新文件（未跟踪）
- D - 已删除
- R - 重命名

### 步骤二：分析变更内容

根据修改文件路径判断变更类型：

| 路径模式 | 变更类型 |
|----------|----------|
| 01-公众号工作流/选题管理/02-写作中/ | 文章相关 |
| 01-公众号工作流/素材库/ | 素材相关 |
| 02-八字工作流/ | 八字工作流 |
| 03-工具开发/ | 工具开发 |
| .claude/skills/ | 技能配置 |
| 记忆库/ | 记忆库 |
| 对话历史.md | 对话记录 |
| 任务清单.md | 任务记录 |
| CLAUDE.md | 系统配置 |

### 步骤三：决定提交策略

**单一主题修改**：一次性提交所有文件

**多主题修改**：按目录/主题分组提交

分组优先级：
1. 文章目录（每篇文章一个 commit）
2. 素材库（按类型分组）
3. 八字工作流
4. 工具开发
5. 技能目录（每个技能一个 commit）
6. 系统文件（合并为一个 commit）

### 步骤四：生成 Commit Message

格式规范：
- 用中文
- 简洁描述变更内容
- 不超过 50 字

常用模板：
- 文章：添加 [文章主题]、润色 [文章标题]、更新 [文章标题]
- 素材：添加 [素材类型] 素材、更新 [素材库名称]
- 八字：添加 [八字案例]、更新 [八字知识]
- 工具：开发 [工具名称]、优化 [功能描述]
- 技能：添加 [技能名] 技能、更新 [技能名] 技能
- 系统文件：更新系统配置、更新任务清单、更新对话记录
- 记忆：添加情景记忆、更新语义记忆

### 步骤五：执行提交

git add <file1> <file2> ...
git commit -m "commit message"

注意：
- 避免使用 git add . 或 git add -A
- 明确指定要提交的文件
- 排除临时文件（.bak-*、.html.bak-*）

### 步骤六：确认结果

git log --oneline -3

输出最近提交记录确认成功。

## 排除规则

以下文件默认不提交：
- *.bak-* - 备份文件
- .DS_Store - macOS 系统文件
- node_modules/ - 依赖目录
- 临时测试文件（除非明确要求）

## Co-Authored-By

所有提交自动添加：
Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
