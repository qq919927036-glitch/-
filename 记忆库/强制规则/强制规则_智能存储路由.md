# 强制规则：智能存储路由

> 每次创建文件时强制执行，减少决策疲劳，保证文件永远在正确位置

## 执行流程

每次创建文件时自动执行：

1. **识别内容类型**
   - 文章 / 素材 / 八字案例 / 工具 / 系统文件

2. **查询存储规则**
   - 根据类型匹配存储路径

3. **构建完整路径**
   - 按规则生成完整路径

4. **验证路径合规**
   - 确保在工作区边界内

5. **执行存储操作**
   - 创建目录和文件

6. **告知用户**
   - 说明保存位置和决策理由

## 存储规则

### 内容类型 → 存储路径

| 类型 | 路径 | 示例 |
|------|------|------|
| **文章** | `01-公众号工作流/选题管理/02-写作中/YYYY-MM-DD-标题/` | 2026-02-18-健脾疏肝茶 |
| **素材** | `01-公众号工作流/素材库/[金句/案例/数据]/` | 金句库/养生健康类.md |
| **八字案例** | `02-八字工作流/案例管理/[待分析/进行中/已完成]/` | 待分析/案例001 |
| **工具** | `03-工具开发/` | antigravity_fix.py |
| **系统文件** | `记忆库/` 或根目录 | CLAUDE.md |

### 工作区边界规则

**宪法级别规则：所有文件必须保存在 Claude-Code/ 目录内**

- ❌ 禁止保存到目录外（绝对禁止）
- ❌ 禁止保存到系统目录（/usr/、~/bin/等）
- ✅ 只读操作可以访问外部文件

## 决策示例

**用户**: "帮我写一篇关于雨水节气祛湿的文章"

**AI执行**:
1. 识别为"文章"类型
2. 路径: `01-公众号工作流/选题管理/02-写作中/2026-02-18-雨水节气祛湿/`
3. 创建目录和文件
4. 回复:
   ```
   ✅ 文章已保存到: 01-公众号工作流/选题管理/02-写作中/2026-02-18-雨水节气祛湿/
   📁 内容类型: 文章
   💡 决策理由: 长文本内容，用于公众号发布
   ```
